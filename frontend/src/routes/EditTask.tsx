import React, { useState } from 'react';
import { Navigate, useParams } from 'react-router-dom';
const EditTask: React.FC = () => {

    const { id_task } = useParams();
    const [description,setDescription] = useState({
        description:""
    });

    const [send,setSend] = useState("no send");

    const handleTextArea = (e:React.ChangeEvent<HTMLTextAreaElement>) => {
        setDescription({description:e.target.value});
    }

    const handleSubmit = async (e:React.SyntheticEvent<HTMLFormElement>) => {
        e.preventDefault();
        const res = await fetch(`http://localhost:8080/task/edit/${id_task}`,{
            method: "PUT",
            credentials:"include",
            headers:{
               "Content-Type":"application/json",
            },
            body:JSON.stringify(description)
        });
        const data = await res.json();
        if (data.message==="Task edited") {
            setSend("sended");
        }
    }

    if (send !== "no send") {
        return <Navigate to="/dashboard"/>
    }

    return (
        <div className="[grid-area:form] w-[50%] mx-auto">
            <form onSubmit={handleSubmit} className="formEdit flex flex-col gap-5 justify-center" action="">
                <div className="w-[70%] flex flex-col items-center justify-center mx-auto gap-5">
                    <svg viewBox="0 0 317 188" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="undraw_text_field_htlv 1" clipPath="url(#clip0_10_2)">
                            <path id="Vector" d="M295.391 183.661C294.982 184.864 294.473 186.02 293.87 187.113C293.703 187.415 293.527 187.712 293.34 188H277.806C277.697 187.907 277.591 187.809 277.482 187.716C276.936 187.667 276.394 187.605 275.864 187.539C275.919 187.485 275.977 187.432 276.032 187.379C275.751 187.406 275.47 187.432 275.19 187.446C275.412 187.476 275.638 187.508 275.864 187.539C275.696 187.694 275.525 187.849 275.349 188H274.671L275.127 187.446C274.765 187.459 274.406 187.468 274.043 187.459L275.178 187.113L276.402 186.74C276.449 186.784 276.5 186.829 276.546 186.873C278.636 184.784 280.335 182.238 281.543 179.387C282.75 176.535 283.441 173.437 283.575 170.276C283.709 167.115 283.283 163.955 282.322 160.985C281.361 158.015 279.885 155.295 277.981 152.987C281.045 155.326 283.669 158.335 285.701 161.839C287.733 165.343 289.131 169.272 289.815 173.397C290.167 175.413 290.22 177.482 289.971 179.518C290.108 179.345 290.244 179.172 290.377 178.995C292.352 176.273 293.775 173.09 294.546 169.671C295.317 166.252 295.417 162.682 294.837 159.215C296.35 163.044 297.177 167.178 297.272 171.375C297.367 175.572 296.728 179.748 295.391 183.661Z" fill="#E6E6E6" />
                            <path id="Vector_2" d="M217.9 35.2951C223.947 35.2951 228.85 29.7179 228.85 22.838C228.85 15.9581 223.947 10.3809 217.9 10.3809C211.853 10.3809 206.951 15.9581 206.951 22.838C206.951 29.7179 211.853 35.2951 217.9 35.2951Z" fill="#2F2E41" />
                            <path id="Vector_3" d="M253.408 182.808L248.627 182.807L246.353 161.83L253.408 161.831L253.408 182.808Z" fill="#FFB8B8" />
                            <path id="Vector_4" d="M245.213 181.253H254.432V187.857H239.408C239.408 186.99 239.558 186.131 239.85 185.33C240.142 184.529 240.569 183.801 241.108 183.187C241.647 182.574 242.287 182.088 242.991 181.756C243.696 181.424 244.451 181.253 245.213 181.253Z" fill="#2F2E41" />
                            <path id="Vector_5" d="M204.644 182.096L200.029 180.68L202.632 159.752L209.444 161.842L204.644 182.096Z" fill="#FFB8B8" />
                            <path id="Vector_6" d="M197.088 178.168L205.989 180.899L204.478 187.275L189.972 182.825C190.373 181.134 191.348 179.693 192.682 178.82C194.017 177.947 195.601 177.712 197.088 178.168Z" fill="#2F2E41" />
                            <path id="Vector_7" d="M213.703 85.7463L199.469 177.513L206.768 179.174L229.762 114.398L246.916 178.759L255.676 177.513C255.676 177.513 251.661 85.331 238.887 77.4415L213.703 85.7463Z" fill="#2F2E41" />
                            <path id="Vector_8" d="M191.129 118.574C191.642 118.284 192.093 117.869 192.45 117.358C192.807 116.848 193.061 116.255 193.195 115.621C193.328 114.987 193.338 114.327 193.224 113.688C193.109 113.049 192.872 112.447 192.531 111.923L200.381 98.8262L193.141 98.6984L186.797 111.155C186.061 111.866 185.581 112.859 185.446 113.946C185.311 115.033 185.532 116.139 186.066 117.054C186.6 117.968 187.41 118.628 188.343 118.908C189.276 119.189 190.268 119.07 191.129 118.574Z" fill="#FFB8B8" />
                            <path id="Vector_9" d="M242.956 102.38C243.469 102.089 243.92 101.674 244.277 101.164C244.634 100.654 244.888 100.061 245.022 99.4267C245.156 98.7926 245.166 98.1328 245.051 97.4938C244.936 96.8549 244.7 96.2523 244.358 95.7286L252.209 82.632L244.969 82.5042L238.624 94.9605C237.889 95.6716 237.408 96.6648 237.273 97.752C237.139 98.8392 237.359 99.9449 237.893 100.859C238.427 101.774 239.238 102.434 240.171 102.714C241.104 102.994 242.095 102.876 242.956 102.38Z" fill="#FFB8B8" />
                            <path id="Vector_10" d="M218.179 37.7614C223.468 37.7614 227.756 32.8834 227.756 26.8661C227.756 20.8488 223.468 15.9708 218.179 15.9708C212.89 15.9708 208.602 20.8488 208.602 26.8661C208.602 32.8834 212.89 37.7614 218.179 37.7614Z" fill="#FFB8B8" />
                            <path id="Vector_11" d="M238.887 43.8074C238.522 42.1465 232.317 42.5617 232.317 42.5617C232.317 42.5617 225.33 40.7343 225.396 40.9628C219.509 40.4472 212.327 42.9619 211.281 43.3433C209.141 44.015 205.052 46.0698 202.103 47.5811C201.693 47.7916 201.372 48.1778 201.21 48.6559C201.049 49.134 201.06 49.6653 201.241 50.1342L210.236 73.4968L211.513 88.6529L241.077 78.272C233.777 74.9501 239.252 45.4684 238.887 43.8074Z" fill="#659BAB" />
                            <path id="Vector_12" d="M236.332 44.2226L238.758 43.5293L252.026 73.2891L252.756 90.3141L244.361 82.8398V76.196L235.602 63.3236L236.332 44.2226Z" fill="#659BAB" />
                            <path id="Vector_13" d="M204.396 46.5065L201.586 47.9271C201.44 48.0011 201.312 48.1148 201.213 48.2584C201.115 48.4019 201.049 48.5708 201.021 48.7502L195.454 84.9158L189.979 103.186L197.279 107.339L205.673 84.5006L208.593 67.8911L204.396 46.5065Z" fill="#659BAB" />
                            <path id="Vector_14" d="M208.136 21.73C210.08 21.0039 212.13 22.1422 214.029 23.0087C215.9 23.8628 217.9 24.4782 219.912 24.3437C221.925 24.2091 223.961 23.2421 225.177 21.4131C226.394 19.5841 226.609 16.843 225.404 15.0035C224.611 13.7925 223.346 13.1016 222.079 12.6517C219.372 11.6904 216.342 11.6572 213.769 13.0134C211.195 14.3695 209.177 17.2345 208.965 20.4519" fill="#2F2E41" />
                            <path id="Vector_15" d="M217.609 13.0514C216.956 8.02269 219.377 2.80154 222.681 0.928561C225.986 -0.944415 229.863 0.16047 232.84 2.94957C235.817 5.73866 237.987 10.0247 239.602 14.5807C241.217 19.1368 242.335 24.0167 243.652 28.7683C244.82 32.9883 246.192 37.2108 248.412 40.4383C250.632 43.6659 253.86 45.7661 256.953 44.8793C254.412 48.7664 249.737 48.0934 246.837 44.7685C243.937 41.4437 242.429 36.2469 241.242 31.1883C240.055 26.1297 239.023 20.8368 236.727 16.6448C232.642 9.18724 224.627 6.94674 218.903 11.6625" fill="#2F2E41" />
                            <path id="Vector_16" d="M317 187.113H0V188H317V187.113Z" fill="#3F3D56" />
                            <path id="Vector_17" d="M166.314 101.989H27.9631C26.8553 101.988 25.7932 101.487 25.0099 100.595C24.2266 99.7041 23.786 98.4958 23.7847 97.2355V59.7341C23.786 58.4737 24.2266 57.2654 25.0099 56.3742C25.7932 55.483 26.8553 54.9818 27.9631 54.9804H166.314C167.422 54.9818 168.484 55.483 169.267 56.3742C170.05 57.2654 170.491 58.4737 170.492 59.7341V97.2355C170.491 98.4958 170.05 99.7041 169.267 100.595C168.484 101.487 167.422 101.988 166.314 101.989ZM27.9631 56.0367C27.1015 56.0379 26.2755 56.4279 25.6663 57.121C25.057 57.8141 24.7143 58.7538 24.7133 59.7341V97.2355C24.7143 98.2157 25.057 99.1554 25.6663 99.8486C26.2755 100.542 27.1015 100.932 27.9631 100.933H166.314C167.175 100.932 168.001 100.542 168.611 99.8486C169.22 99.1554 169.563 98.2157 169.564 97.2355V59.7341C169.563 58.7538 169.22 57.8141 168.611 57.121C168.001 56.4279 167.175 56.0379 166.314 56.0367H27.9631Z" fill="#3F3D56" />
                            <path id="Vector_18" d="M159.582 94.0663H34.695C34.6339 94.0665 34.5734 94.053 34.5169 94.0266C34.4604 94.0001 34.4091 93.9612 34.3658 93.9122C34.3226 93.8631 34.2883 93.8048 34.2648 93.7406C34.2414 93.6764 34.2294 93.6076 34.2294 93.5381C34.2294 93.4686 34.2414 93.3998 34.2648 93.3357C34.2883 93.2715 34.3226 93.2132 34.3658 93.1641C34.4091 93.1151 34.4604 93.0762 34.5169 93.0497C34.5734 93.0233 34.6339 93.0097 34.695 93.01H159.582C159.643 93.0097 159.704 93.0233 159.76 93.0497C159.817 93.0762 159.868 93.1151 159.911 93.1641C159.954 93.2132 159.989 93.2715 160.012 93.3357C160.036 93.3998 160.048 93.4686 160.048 93.5381C160.048 93.6076 160.036 93.6764 160.012 93.7406C159.989 93.8048 159.954 93.8631 159.911 93.9122C159.868 93.9612 159.817 94.0001 159.76 94.0266C159.704 94.053 159.643 94.0665 159.582 94.0663Z" fill="#E6E6E6" />
                            <path id="Vector_19" d="M47.9265 76.6361H37.7127C37.5898 76.6365 37.4721 76.6924 37.3853 76.7914C37.2985 76.8904 37.2498 77.0245 37.2498 77.1643C37.2498 77.3041 37.2985 77.4382 37.3853 77.5373C37.4721 77.6363 37.5898 77.6921 37.7127 77.6925H42.3553V87.0323C42.3472 87.7092 42.5662 88.3642 42.9678 88.8638C43.3693 89.3634 43.9233 89.6701 44.5166 89.7212C44.5456 89.7227 44.5756 89.7232 44.6059 89.7232C44.9709 89.7155 45.3287 89.6068 45.6484 89.4063C45.9681 89.2059 46.2401 88.9199 46.4408 88.573C46.5144 88.4609 46.546 88.3202 46.5285 88.1817C46.511 88.0432 46.4459 87.9183 46.3475 87.8344C46.2491 87.7504 46.1254 87.7144 46.0037 87.7341C45.8819 87.7538 45.772 87.8277 45.6982 87.9396C45.5798 88.1634 45.4122 88.3481 45.2118 88.4755C45.0114 88.6029 44.7852 88.6685 44.5556 88.6658C44.2009 88.6284 43.872 88.4387 43.6357 88.1352C43.3995 87.8318 43.2737 87.4374 43.2839 87.0323V77.6925H47.9265C47.9876 77.6927 48.0481 77.6792 48.1046 77.6527C48.1611 77.6263 48.2124 77.5874 48.2557 77.5383C48.2989 77.4893 48.3333 77.431 48.3567 77.3668C48.3801 77.3026 48.3921 77.2338 48.3921 77.1643C48.3921 77.0948 48.3801 77.026 48.3567 76.9618C48.3333 76.8976 48.2989 76.8393 48.2557 76.7903C48.2124 76.7412 48.1611 76.7023 48.1046 76.6759C48.0481 76.6494 47.9876 76.6359 47.9265 76.6361Z" fill="#659BAB" />
                            <path id="Vector_20" d="M82.7463 122.589C84.7975 122.589 86.4604 120.697 86.4604 118.363C86.4604 116.029 84.7975 114.138 82.7463 114.138C80.695 114.138 79.0322 116.029 79.0322 118.363C79.0322 120.697 80.695 122.589 82.7463 122.589Z" fill="#E6E6E6" />
                            <path id="Vector_21" d="M97.1385 122.589C99.1898 122.589 100.853 120.697 100.853 118.363C100.853 116.029 99.1898 114.138 97.1385 114.138C95.0873 114.138 93.4244 116.029 93.4244 118.363C93.4244 120.697 95.0873 122.589 97.1385 122.589Z" fill="#659BAB" />
                            <path id="Vector_22" d="M111.531 122.589C113.582 122.589 115.245 120.697 115.245 118.363C115.245 116.029 113.582 114.138 111.531 114.138C109.479 114.138 107.817 116.029 107.817 118.363C107.817 120.697 109.479 122.589 111.531 122.589Z" fill="#E6E6E6" />
                            <path id="Vector_23" d="M50.0943 89.3292C50.2459 89.3233 50.3895 89.2505 50.4949 89.1264C50.6003 89.0023 50.6592 88.8364 50.6592 88.6638C50.6592 88.4912 50.6003 88.3254 50.4949 88.2013C50.3895 88.0771 50.2459 88.0044 50.0943 87.9984C49.9427 88.0044 49.799 88.0771 49.6936 88.2013C49.5882 88.3254 49.5293 88.4912 49.5293 88.6638C49.5293 88.8364 49.5882 89.0023 49.6936 89.1264C49.799 89.2505 49.9427 89.3233 50.0943 89.3292Z" fill="#3F3D56" />
                            <path id="Vector_24" d="M53.8084 89.3292C53.96 89.3233 54.1036 89.2505 54.209 89.1264C54.3144 89.0023 54.3733 88.8364 54.3733 88.6638C54.3733 88.4912 54.3144 88.3254 54.209 88.2013C54.1036 88.0771 53.96 88.0044 53.8084 87.9984C53.6568 88.0044 53.5131 88.0771 53.4077 88.2013C53.3023 88.3254 53.2434 88.4912 53.2434 88.6638C53.2434 88.8364 53.3023 89.0023 53.4077 89.1264C53.5131 89.2505 53.6568 89.3233 53.8084 89.3292Z" fill="#3F3D56" />
                            <path id="Vector_25" d="M57.5225 89.3292C57.6741 89.3233 57.8177 89.2505 57.9231 89.1264C58.0285 89.0023 58.0874 88.8364 58.0874 88.6638C58.0874 88.4912 58.0285 88.3254 57.9231 88.2013C57.8177 88.0771 57.6741 88.0044 57.5225 87.9984C57.3709 88.0044 57.2272 88.0771 57.1218 88.2013C57.0164 88.3254 56.9575 88.4912 56.9575 88.6638C56.9575 88.8364 57.0164 89.0023 57.1218 89.1264C57.2272 89.2505 57.3709 89.3233 57.5225 89.3292Z" fill="#3F3D56" />
                        </g>
                        <defs>
                            <clipPath id="clip0_10_2">
                                <rect width="317" height="188" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                    <h3>Edit</h3>
                </div>
                <div className="my-3">
                    <label htmlFor="description">Change description task</label>
                    <textarea onChange={handleTextArea} value={description.description} className="w-full border-b-2 border-b-[var(--color-input)]" name="description" id="" />
                </div>
                <div className="flex items-center justify-center mb-3">
                    <input type="submit" value="Save" />
                </div>
            </form>
        </div>
    );
};

export default EditTask;